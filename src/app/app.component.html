<div class="container">
    <h1 style="color:rgb(41, 38, 38);text-align: center"><i>TEMPLATE DRIVEN FORM</i></h1>
   
    <div class="alert alert-danger" *ngIf="errorMsg;else next">{{errorMsg}}</div>
  
    <ng-template #next>
    <form #userForm="ngForm" (ngSubmit)="enroll();userForm.reset()">
      <!-- {{userForm.value|json}}
      <hr>
      {{userModel|json}} -->



    <div class="form-group">
    <label>Name</label>
    <input type="text" #name="ngModel" name="userName" [(ngModel)]="userModel.name" 
         [class.is-invalid]="name.invalid && name.touched"  required           class="form-control">
  <small class="text-danger" [class.d-none]="name.valid||name.untouched">Name is required</small>
        </div>




  <div class="form-group">
      <label>Email</label>
      <input type="email" #email="ngModel" name="email" required class="form-control"
        [class.is-invalid]="email.invalid && email.touched"
       [(ngModel)]="userModel.email">
    <small class="text-danger" [class.d-none]="email.valid||email.untouched">Email is required</small>
  </div>




      <div class="form-group">
  <label>Phone</label>
  <input type="phone" required name="phone" [(ngModel)]="userModel.phone" 
  pattern="^\d{10}$" class="form-control"  #phone="ngModel"
    [class.is-invalid]="phone.invalid && phone.touched">
  <div *ngIf="phone.errors && (phone.invalid && phone.touched)">
   <small class="text-danger" *ngIf="phone.errors.required">Phone number is required</small>
   <small class="text-danger" *ngIf="phone.errors.pattern">phone number must be 10 digits</small>
  </div>
  </div>




<div class="row">
<div class="form-group col-md-3">
    <select (blur)="validateTopic(topic.value)" (change)="validateTopic(topic.value)" 
    name="topic" #topic="ngModel" required [(ngModel)]="userModel.topic"
    class="custom-select" [class.is-invalid]="hasError && topic.touched" >
        <option value='default'>Intrested in </option>
        <option  *ngFor="let topic of topics">{{topic}}</option>
    </select>
    <small class="text-danger" [class.d-none]="!hasError||topic.untouched">choose a topic</small>
</div>
</div>




<div class="form-group mb-5">
    <div class="form-check">
        <input type="checkbox" required name="subscribe" [(ngModel)]="userModel.subscribe" class="form-check-input">
        <label class="form-check-label">Send me promotional offers</label>
    </div>


         <div style="margin-top: 10px;">
        <input type="submit" [disabled]="userForm.form.invalid||hasError"  value="submit" class="btn btn-success">
    </div>


    </div>
</form>
</ng-template>
</div>


<div>
    <table class="table table-bordered">
     <tr>
         <th>Id</th>
         <th>name</th>
         <th>email</th>
         <th>phone</th>
         <th>topic</th>
         <th>subscribe</th>
     </tr>
     <tr *ngFor="let employee of employees">
         <td>
             {{employee.id}}
         </td>
         <td>
             {{employee.name}}
         </td>
         <td>
             {{employee.email}}
         </td>
         <td>
            {{employee.phone}}
         </td>
         <td>
             {{employee.topic}}
         </td>
         <td>
             {{employee.subscribe}}
         </td>
        

     </tr>
    </table>

</div>